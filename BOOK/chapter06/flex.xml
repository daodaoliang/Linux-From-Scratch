<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN" "http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>
<sect1 id="ch-system-flex" xreflabel="Flex" role="wrap">
<title>Flex-&flex-version;</title>
<?dbhtml filename="flex.html"?>

<indexterm zone="ch-system-flex"><primary sortas="a-Flex">Flex</primary></indexterm>

<sect2 role="package"><title/>
<para>The Flex package contains a utility for generating programs that
recognize patterns in text.</para>

<segmentedlist>
<segtitle>&buildtime;</segtitle>
<segtitle>&diskspace;</segtitle>
<seglistitem><seg>0.1 SBU</seg><seg>3.4 MB</seg></seglistitem>
</segmentedlist>

<segmentedlist>
<segtitle>Flex installation depends on</segtitle>
<seglistitem><seg>Bash, Binutils, Bison, Coreutils, Diffutils,
GCC, Gettext, Glibc, Grep, M4, Make, Sed</seg></seglistitem>
</segmentedlist>
</sect2>

<sect2 role="installation">
<title>Installation of Flex</title>

<para>Flex contains several known bugs. Fix these with the following patch:</para>

<screen><userinput>patch -Np1 -i ../flex-&flex-version;-debian-fixes-2.patch</userinput></screen>

<para>The GNU autotools detects that the Flex source code has been modified by the patch,
and tries to update the man pages to include those changes, but this breaks on many
systems, and the default pages are fine, so make sure they don't get renegerated:</para>

<screen><userinput>touch doc/*.1</userinput></screen>

<para>Now prepare Flex for compilation:</para>

<screen><userinput>./configure --prefix=/usr</userinput></screen>

<para>Compile the package:</para>

<screen><userinput>make</userinput></screen>

<para>To test the results, issue:
<userinput>make check</userinput>.</para>

<para>Now install the package:</para>

<screen><userinput>make install</userinput></screen>

<para>There are some packages that expect to find the <emphasis>lex</emphasis>
library in <filename>/usr/lib</filename>. Create a symlink to account for
this:</para>

<screen><userinput>ln -s libfl.a /usr/lib/libl.a</userinput></screen>

<para>A few programs don't know about <command>flex</command> yet and try
to run its predecessor <command>lex</command>. To support those programs,
create a wrapper script named <filename>lex</filename> that calls
<command>flex</command> in <emphasis>lex</emphasis> emulation mode:</para>

<screen><userinput>cat &gt; /usr/bin/lex &lt;&lt; "EOF"</userinput>
#!/bin/sh
# Begin /usr/bin/lex

exec /usr/bin/flex -l "$@"

# End /usr/bin/lex
<userinput>EOF
chmod 755 /usr/bin/lex</userinput></screen>

</sect2>


<sect2 id="contents-flex" role="content"><title>Contents of Flex</title>

<segmentedlist>
<segtitle>Installed programs</segtitle>
<segtitle>Installed library</segtitle>
<seglistitem><seg>flex, flex++ (link to flex) and lex</seg>
<seg>libfl.a</seg></seglistitem>
</segmentedlist>

<variablelist><title>Short descriptions</title>

<varlistentry>
<term id="flex"><command>flex</command></term>
<listitem>
<indexterm zone="ch-system-flex flex"><primary sortas="b-flex">flex</primary></indexterm>
<para>is a tool for generating programs that
recognize patterns in text. Pattern recognition is useful in many applications.
From a set of rules on what to look for, flex makes a program that looks for
those patterns. The reason to use flex is that it is much easier to specify
the rules for a pattern-finding program than to write the program.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="flex-"><command>flex++</command></term>
<listitem>
<indexterm zone="ch-system-flex flex-"><primary sortas="b-flex++">flex++</primary></indexterm>
<para>invokes a version of flex that is used exclusively for C++ scanners.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="libfl.a"><command>libfl.a</command></term>
<listitem>
<indexterm zone="ch-system-flex libfl.a"><primary sortas="c-libfl.a">libfl.a</primary></indexterm>
<para>is the flex library.</para>
</listitem>
</varlistentry>
</variablelist>

</sect2>

</sect1>
