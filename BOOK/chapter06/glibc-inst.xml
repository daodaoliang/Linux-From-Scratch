<sect2>
<title>Installation of Glibc</title>

<para>
Unpack the glibc-linuxthreads in the glibc-2.2.1 directory, not in 
/usr/src. 
</para>

<para>
Install Glibc by running the following commands:
</para>

<blockquote><literallayout>
	<userinput>mknod -m 0666 /dev/null c 1 3 &amp;&amp;</userinput>
	<userinput>touch /etc/ld.so.conf &amp;&amp;</userinput>
	<userinput>mkdir /usr/src/glibc-build &amp;&amp;</userinput>
	<userinput>cd /usr/src/glibc-build &amp;&amp;</userinput>
	<userinput>sed s/"\$(PERL)"/"\/usr\/bin\/perl"/ \</userinput>
	<userinput>&nbsp;&nbsp;&nbsp;../glibc-2.2.1/malloc/Makefile
		&gt; tmp~ &amp;&amp;</userinput>
	<userinput>mv tmp~ ../glibc-2.2.1/malloc/Makefile &amp;&amp;
		</userinput>
	<userinput>sed "s/root/0/" ../glibc-2.2.1/login/Makefile 
		&gt; tmp~ &amp;&amp; </userinput>
	<userinput>mv tmp~ ../glibc-2.2.1/login/Makefile &amp;&amp;
		</userinput>
	<userinput>../glibc-2.2.1/configure \</userinput>
	<userinput>&nbsp;&nbsp;&nbsp;--prefix=/usr --enable-add-ons 
		\</userinput>
	<userinput>&nbsp;&nbsp;&nbsp;--libexecdir=/usr/bin &amp;&amp;
		</userinput>
	<userinput>sed s/"cross-compiling = yes"/"cross-compiling = no"/ 
		\</userinput>
	<userinput>&nbsp;&nbsp;&nbsp;config.make &gt; config.make~
		&amp;&amp;</userinput>
	<userinput>mv config.make~ config.make &amp;&amp;</userinput>
	<userinput>make &amp;&amp;</userinput>
	<userinput>make install &amp;&amp;</userinput>
	<userinput>make localedata/install-locales</userinput>
</literallayout></blockquote>

<para>
During the configure stage you will see the following warning:
</para>

<blockquote><screen>
configure: warning:
*** An auxiliary program is missing or too old;
*** some features will be disabled.
*** Check the INSTALL file for required versions.
</screen></blockquote>

<para>
This warning refers to the missing msgfmt program from the gettext
package. But there is nothing to worry about: Glib will still be
installed the same way as when msgfmt is present. It can safely be
ignored in our case.
</para>

<para>
By exiting the chroot'ed environment and re-entering it, you will be
able to get rid of the "I have no name!" message in the command prompt,
which is caused by bash's inability to resolve a userid to a username.
You don't have to exit and re-enter chroot, but it's highly recommended
to ensure a properly working bash.
</para>

<para>
Run the following commands to accomplish this:
</para>

<blockquote><literallayout>
	<userinput>logout</userinput>
	<userinput>chroot $LFS /usr/bin/env -i HOME=/root
		\</userinput>
	<userinput>&nbsp;&nbsp;&nbsp;TERM=$TERM /bin/bash --login</userinput>
 
</literallayout></blockquote>

</sect2>

