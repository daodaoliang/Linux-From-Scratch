<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN" "http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd">
<sect1 id="ch-system-kernfs">
<title>Mounting virtual kernel file systems</title>
<?dbhtml filename="kernfs.html"?>

<para>Various file systems exported by the kernel don't exist at all on your
hard drive, but are used to communicate things to and from the kernel itself.</para>

<para>Begin by creating directories onto which the file systems will be mounted:</para>

<screen><userinput>mkdir -p $LFS/{dev,proc,sys}</userinput></screen>

<para>Mount the file systems:</para>

<screen><userinput>mount -t proc proc $LFS/proc
mount -t sysfs sysfs $LFS/sys</userinput></screen>

<para>Create two static nodes which get used early in bootup:</para>

<screen><userinput>mknod -m 600 $LFS/dev/console c 5 1
mknod -m 666 $LFS/dev/null c 1 3</userinput></screen>

<para>Create a clone of the host's /dev directory:</para>

<screen><userinput>mount --bind /dev $LFS/dev</userinput></screen>

<para>Finally, mount the <quote>devpts</quote> and <quote>tmpfs</quote> file
systems:</para>

<screen><userinput>mount -t devpts -o gid=4,mode=620 devpts $LFS/dev/pts
mount -t tmpfs tmpfs $LFS/dev/shm</userinput></screen>

<para>Remember that if for any reason you stop working on your LFS, and start
again later, it's important to check that these file systems are mounted again
before entering the chroot environment, otherwise problems could occur.</para>

</sect1>
