<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN" "http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>
<sect1 id="ch-scripts-setclock">
<title>Configuring the setclock script</title>
<?dbhtml filename="setclock.html"?>

<indexterm zone="ch-scripts-setclock">
<primary sortas="d-setclock">setclock</primary>
<secondary>configuring</secondary></indexterm>

<para>The <command>setclock</command> script reads the time from the hardware clock,
also known as BIOS or the Complementary Metal Oxide Semiconductor
(CMOS) clock. If the hardware clock is set to Universal Coordinated
Time (UTC), this script will convert the hardware clock's time to
your local time using the <filename>/etc/localtime</filename> file
(which tells hwclock which timezone you are in). There is no way to
detect whether or not your hardware clock is set to UTC time, so this
needs to be manually configured.</para>

<para>If you can't remember whether or not you have set your hardware
clock to UTC time, you can find out by following this procedure. Run
the <userinput>hwclock --show</userinput> command. This will tell you
what the current time according to the hardware clock is. If this time
matches whatever your watch says, then your hardware clock is set to
local time. If the output from <command>hwclock</command> is not local
time, chances are it is set to UTC time. Verify this by adding or
subtracting the proper amount of hours for your timezone to this
<command>hwclock</command> time. For example, if you live in the MST
timezone, which is also known as GMT -0700, add 7 hours to the local
time. Then account for Daylight Savings Time which means you have to
remove an hour (or only add 6 in the first place) during the summer
months.</para>

<para>Change the value of the <emphasis>UTC</emphasis> variable below
to a value of <parameter>0</parameter> (zero) if your hardware clock
is <emphasis>not</emphasis> set to UTC time.</para>

<para>Create a new file <filename>/etc/sysconfig/clock</filename> by running
the following:</para>

<screen><userinput>cat &gt; /etc/sysconfig/clock &lt;&lt; "EOF"
# Begin /etc/sysconfig/clock

UTC=1

# End /etc/sysconfig/clock
EOF</userinput></screen>

<para>A good hint explaining how to deal with time on LFS is available
at <ulink url="&hints-root;time.txt"/>. It explains issues such as
time zones, UTC, and the TZ environment variable.</para>

</sect1>

