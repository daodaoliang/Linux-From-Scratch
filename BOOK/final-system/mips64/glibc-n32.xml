<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN"
  "http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  <!ENTITY % patches-entities SYSTEM "../../patches.ent">
  %general-entities;
  %patches-entities;
]>

<sect1 id="ch-system-glibc-n32" role="wrap">
  <?dbhtml filename="glibc-n32.html"?>

  <title>Glibc-&glibc-version; N32</title>

  <indexterm zone="ch-system-glibc-n32">
    <primary sortas="a-Glibc">Glibc N32</primary>
  </indexterm>

  <xi:include xmlns:xi="http://www.w3.org/2003/XInclude"
  href="../x86/glibc.xml"
  xpointer="xpointer(id('package-glibc'))"/>

  <sect2 role="installation">
    <title>Installation of Glibc</title>

    <xi:include xmlns:xi="http://www.w3.org/2003/XInclude"
    href="../x86/glibc.xml"
    xpointer="xpointer(id('install-glibc')/para[1])"/>

    <para>This architecture does not currently support NPTL, so we will
    have to include Glibc Linuxthreads as a threading library. Building
    for a Linuxthreads based glibc you will need to unpack the
    <filename>glibc-linuxthreads-&glibc-version;</filename> tarball from
    within the <filename class="directory">glibc-&glibc-version;</filename>
    directory.</para>

    <xi:include xmlns:xi="http://www.w3.org/2003/XInclude"
    href="../x86/glibc.xml"
    xpointer="xpointer(id('install-glibc')/para[2])"/>

    <para>The following patch corrects the building of
    <filename class="headerfile">syscall.h</filename>:</para>

<screen><userinput>patch -Np1 -i ../&glibc-mips_syscall-patch;</userinput></screen>

    <para>NPTL is not supported under this architecture, so we are going to
    remove the <filename class="directory">nptl</filename> directory from
    the Glibc source:</para>

<screen><userinput>rm -rf nptl*</userinput></screen>

   <para>Now we make sure the Glibc goes into <filename
    class="directory">/lib32</filename>:</para>

<screen><userinput>echo "slibdir=/lib32" >> configparms</userinput></screen>

    <xi:include xmlns:xi="http://www.w3.org/2003/XInclude"
    href="../x86/glibc.xml"
    xpointer="xpointer(id('install-glibc')/para[4]/range-to(id('install-glibc')/para[12]))"/>

<screen><userinput>CC="gcc ${BUILDN32}" CXX="gcc ${BUILDN32} \
    ../glibc-&glibc-version;/configure --prefix=/usr \
    --disable-profile --enable-add-ons --enable-kernel=2.6.0 \
    --libexecdir=/usr/lib32/glibc --libdir=/lib32</userinput></screen>

  </sect2>

  <xi:include xmlns:xi="http://www.w3.org/2003/XInclude"
  href="../x86/glibc.xml"
  xpointer="xpointer(id('i18n-glibc'))"/>

  <xi:include xmlns:xi="http://www.w3.org/2003/XInclude"
  href="../x86/glibc.xml"
  xpointer="xpointer(id('conf-glibc'))"/>

  <xi:include xmlns:xi="http://www.w3.org/2003/XInclude"
  href="../x86/glibc.xml"
  xpointer="xpointer(id('conf-ld'))"/>

  <xi:include xmlns:xi="http://www.w3.org/2003/XInclude"
  href="../x86/glibc.xml"
  xpointer="xpointer(id('contents-glibc'))"/>

</sect1>
