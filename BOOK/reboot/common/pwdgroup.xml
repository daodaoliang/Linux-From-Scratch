<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN" "http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
]>
<sect1 id="ch-reboot-pwdgroup">
<title>Creating the passwd, group, and log Files</title>
<?dbhtml filename="pwdgroup.html"?>

<indexterm zone="ch-reboot-pwdgroup"><primary sortas="e-${LFS}/etc/passwd">${LFS}/etc/passwd</primary></indexterm>
<indexterm zone="ch-reboot-pwdgroup"><primary sortas="e-${LFS}/etc/group">${LFS}/etc/group</primary></indexterm>
<indexterm zone="ch-reboot-pwdgroup"><primary sortas="e-${LFS}/var/run/utmp">${LFS}/var/run/utmp</primary></indexterm>
<indexterm zone="ch-reboot-pwdgroup"><primary sortas="e-${LFS}/var/log/btmp">${LFS}/var/log/btmp</primary></indexterm>
<indexterm zone="ch-reboot-pwdgroup"><primary sortas="e-${LFS}/var/log/lastlog">${LFS}/var/log/lastlog</primary></indexterm>
<indexterm zone="ch-reboot-pwdgroup"><primary sortas="e-${LFS}/var/log/wtmp">${LFS}/var/log/wtmp</primary></indexterm>

<para>In order for user <emphasis>root</emphasis> to be able to login
and for the name <quote>root</quote> to be recognized, there need to
be relevant entries in the <filename>${LFS}/etc/passwd</filename> and
<filename>${LFS}/etc/group</filename> files.</para>

<para>Create the <filename>${LFS}/etc/passwd</filename> file by running the following
command:</para>

<screen><userinput>cat &gt; ${LFS}/etc/passwd &lt;&lt; "EOF"
<literal>root::0:0:root:/root:/bin/bash
nobody:x:65534:65534:Nobody:/:/sbin/nologin</literal>
EOF</userinput></screen>

<para>The actual password for <emphasis>root</emphasis> (the <quote>x</quote>
used here is just a placeholder) will be set later.</para>

<para>Create the <filename>${LFS}/etc/group</filename> file by running the following 
command:</para>

<screen><userinput>cat &gt; ${LFS}/etc/group &lt;&lt; "EOF"
<literal>root:x:0:
console:x:1:
tty:x:2:
kmem:x:3:
disk:x:4:
utmp:x:5:
nogroup:x:65534:</literal>
EOF</userinput></screen>

<para>The created groups are not part of any standard&mdash;they are some
of the groups that the Udev configuration will be using in the next
section. The Linux Standard Base (LSB, available at <ulink
url="http://www.linuxbase.org"/>) recommends only that, besides the
group <quote>root</quote> with a Group ID (GID) of 0, a group
<quote>bin</quote> with a GID of 1 be present. All other group names
and GIDs can be chosen freely by the system administrator since
well-written packages do not depend on GID numbers, but rather use the
group's name.</para>

<para>The <command>login</command>, <command>agetty</command>, and
<command>init</command> programs (and others) use a number of log
files to record information such as who was logged into the system and
when. However, these programs will not write to the log files if they
do not already exist. Initialize the log files and give them 
proper permissions:</para>

<screen><userinput>touch ${LFS}/var/run/utmp ${LFS}/var/log/{btmp,lastlog,wtmp}
chmod 664 ${LFS}/var/run/utmp ${LFS}/var/log/lastlog</userinput></screen>

<para>The <filename>${LFS}/var/run/utmp</filename> file records the users
that are currently logged in. The <filename>${LFS}/var/log/wtmp</filename>
file records all logins and logouts. The
<filename>${LFS}/var/log/lastlog</filename> file records when
each user last logged in. The <filename>${LFS}/var/log/btmp</filename> file
records the bad login attempts.</para>

</sect1>

