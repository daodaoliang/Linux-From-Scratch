<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN"
  "http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  <!ENTITY % patches-entities SYSTEM "../../patches.ent">
  %general-entities;
  %patches-entities;
]>

<sect1 id="ch-temp-tools-expect" role="wrap">
  <?dbhtml filename="expect.html"?>

  <title>Expect-&expect-version;</title>

  <indexterm zone="ch-temp-tools-expect">
    <primary sortas="a-Expect">Expect</primary>
  </indexterm>

  <sect2 id="package-expect" role="package">
    <title/>

    <para>The Expect package contains a program for carrying out scripted
    dialogues with other interactive programs.</para>

    <segmentedlist>
      <segtitle>&buildtime;</segtitle>
      <segtitle>&diskspace;</segtitle>

      <seglistitem>
        <seg>Not checked yet</seg>
        <seg>Not checked yet</seg>
      </seglistitem>
    </segmentedlist>

    <segmentedlist>
      <segtitle>&dependencies;</segtitle>

      <seglistitem>
        <seg>Bash, Binutils, Coreutils, Diffutils,
        GCC, Glibc, Grep, Make, Sed, and Tcl</seg>
      </seglistitem>
    </segmentedlist>

  </sect2>

  <sect2 id="install-expect" role="installation">
    <title>Installation of Expect</title>

    <para>First, fix a bug that can result in false failures during the GCC
    test suite run:</para>

<screen><userinput>patch -Np1 -i ../&expect-spawn-patch;</userinput></screen>

    <para>Now prepare Expect for compilation:</para>

<screen><userinput>./configure --prefix=/tools --with-tcl=/tools/lib \
   --with-tclinclude=$TCLPATH --with-x=no</userinput></screen>

    <variablelist>
      <title>The meaning of the configure options:</title>

      <varlistentry>
        <term><parameter>--with-tcl=/tools/lib</parameter></term>
        <listitem>
          <para>This ensures that the configure script finds the Tcl
          installation in the temporary temp-tools location.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><parameter>--with-tclinclude=$TCLPATH</parameter></term>
        <listitem>
          <para>This explicitly tells Expect where to find Tcl's source
          directory and internal headers. Using this option avoids conditions
          where <command>configure</command> fails because it cannot
          automatically discover the location of the Tcl source directory.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><parameter>--with-x=no</parameter></term>
        <listitem>
          <para>This tells the configure script not to search for Tk
          (the Tcl GUI component) or the X Window System libraries, both of
          which may reside on the host system but will not exist when
          building the final system.</para>
        </listitem>
      </varlistentry>

    </variablelist>

    <para>Build the package:</para>

<screen><userinput>make</userinput></screen>

    <para>To test the results, issue: <userinput>make test</userinput>.
    Note that the Expect test suite is known to experience failures under
    certain host conditions that are not within our control. Therefore,
    test suite failures here are not surprising and are not considered
    critical.</para>

    <para>Install the package:</para>

<screen><userinput>make SCRIPTS="" install</userinput></screen>

    <variablelist>
      <title>The meaning of the make parameter:</title>

      <varlistentry>
        <term><parameter>SCRIPTS=""</parameter></term>
        <listitem>
          <para>This prevents installation of the supplementary expect
          scripts, which are not needed.</para>
        </listitem>
      </varlistentry>

    </variablelist>

    <para>Now remove the <envar>TCLPATH</envar> variable:</para>

<screen><userinput>unset TCLPATH</userinput></screen>

    <para>The source directories of both Tcl and Expect can now
    be removed.</para>

  </sect2>

  <sect2 id="contents-expect" role="content">
    <title>Contents of Expect</title>

    <segmentedlist>
      <segtitle>Installed program</segtitle>
      <segtitle>Installed library</segtitle>

      <seglistitem>
        <seg>expect</seg>
        <seg>libexpect-5.42.a</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Short Descriptions</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="expect">
        <term><command>expect</command></term>
        <listitem>
          <para>Communicates with other interactive programs according
          to a script</para>
          <indexterm zone="ch-temp-tools-expect expect">
            <primary sortas="b-expect">expect</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libexpect">
        <term><filename class="libraryfile">libexpect-5.42.a</filename></term>
        <listitem>
          <para>Contains functions that allow Expect to be used as a Tcl
          extension or to be used directly from C or C++ (without Tcl)</para>
          <indexterm zone="ch-temp-tools-expect libexpect">
            <primary sortas="c-libexpect-5.42">libexpect-5.42</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
