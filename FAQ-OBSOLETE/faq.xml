<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook XML V4.1.2//EN">

<article class="faq"><title>The LFS FAQ</title>
	<articleinfo>
		<author>
			<firstname>Seth</firstname>
			<othername>W.</othername>
			<surname>Klein</surname>
			<affiliation>
				<address>
					<email>sk@sethwklein.net</email>
				</address>
			</affiliation>
		</author>
	</articleinfo>
<qandaset>
<!-- dlist: ,lfs-dev,lfs-support,blfs-support -->
	<qandadiv><title>Introduction</title>

<!-- elist: ,lfs-dev,lfs-support,blfs-support -->
<qandaentry id="why-faq">
<question><para>Why this FAQ?</para></question>
<answer><para>The FAQ tries to answer questions before they're asked.
This saves the trouble of asking them,
and sometimes, the trouble of encountering a problem.
</para>
<para>This does reduce traffic and improve the signal to noise ratio
but that is merely a useful side effect.
</para>
<para>Since the FAQ isn't the natural place to look for information,
items should be added to it
only if they can't be added to the appropriate documentation,
although sometimes it will be necessary to add a pointer
to the information in the documentation.
</para></answer>
</qandaentry>

<!-- elist: ,lfs-support -->
		<qandaentry><question><para>What is appropriate for lfs-support?</para></question>
			<answer><para>From the
				<ulink url="http://www.linuxfromscratch.org/mailinglists/info.shtml">website</ulink>:
			</para>
			<blockquote>
				<para>The lfs-support mailing list provides support to users
					building an LFS system as far as the end of the main book.
					Requests for help with installing software beyond the base
					system should go to the blfs-support list.
				</para>
			</blockquote>
			<para>For instance, GCC and Glibc are part of the LFS book and
				belong on lfs-support.
				XFree86, KDE, and GNOME are not part of the LFS book and
				belong on blfs-support.
			</para></answer>
		</qandaentry>
<!-- elist: ,lfs-dev,lfs-support,blfs-support -->
		<qandaentry><question><para>Contributing to this FAQ.</para></question>
			<answer><para>If you have an addition or suggestion, please, let me know.
				I can be reached at
				<ulink url="mailto:sk@sethwklein.net">sk@sethwklein.net</ulink>,
				and I read the lists thoroughly (but not always promptly).
			</para></answer>
			<answer><para>I want to stick to questions that have been asked at least
				twice and to remove items that are no longer an issue.
			</para></answer>
		</qandaentry>
<!-- elist: ,lfs-dev,lfs-support,blfs-support -->
		<qandaentry><question><para>Where is the best place to get help?</para></question>
			<answer><para>When this FAQ fails to help, there are several places to go.
			</para></answer>
			<answer><para>If you're having a problem with something in the book,
				it never hurts to go back over the book.
				It's surprising how easy it is to overlook little things.
			</para></answer>
			<answer><para>If nothing else,
				reading the appropriate man and info pages
				will yield useful information on some subject,
				if not what you were looking for,
				and insure that you know enough not to embarrass yourself
				if you have to ask someone.
			</para></answer>
			<answer><para><ulink url="http://www.tldp.org/"/>
				has the HOW-TOs and a great deal of other documentation.
				You might find something there.
			</para></answer>
			<answer><para>The linuxfromscratch.org site search includes the mailing lists.
				Many questions have been discussed there at least once.  It's at
				<ulink url="http://search.linuxfromscratch.org/"/>.
			</para></answer>
			<answer><para>For support type help, IRC is often best. It's faster,
				and doesn't clog the mailinglists.
				Information on the LFS IRC channel is at
				<ulink url="http://www.linuxfromscratch.org/misc/irc.shtml"/>.
			</para></answer>
			<answer><para>As a last resort, there are the mailing lists.
				People will get frustrated with you if you use the wrong one or cross post.
				Mailing list information is at
				<ulink url="http://www.linuxfromscratch.org/mailinglists/info.shtml"/>.
				and tells which list to use.
			</para></answer>
		</qandaentry>
<!-- elist: ,lfs-dev,lfs-support -->
		<qandaentry><question><para>What is LFS?</para></question>
			<answer><para>LFS stands for Linux From Scratch which is a project that
				primarily documents how to install a Linux system by downloading,
				building, and installing the packages yourself.
			</para>
			<para>For why you might want to do this, how to do it, and other
				useful stuff, see the website at
				<ulink url="http://www.linuxfromscratch.org/"/>.
			</para></answer>
		</qandaentry>
	</qandadiv><!-- Introduction -->


<!-- dlist: ,lfs-dev,lfs-support,blfs-support,new -->
<qandadiv id="frb"><title>Frequently Reported Bugs</title>

<!-- elist: ,lfs-dev -->
<qandaentry id="deps_version_not_match_package">
<question><para>The Dependencies section for Foo 2.0 says "Foo 1.0".
</para></question>
<answer><para>That is correct. Dependencies sections are only updated
occasionally due to the amount of manual labor required.
</para></answer>
</qandaentry>

<!-- elist: ,lfs-dev,new -->
<qandaentry id="shutdown-on-fsck-error">
<question><para>The system shuts down when fsck errors out!
</para></question>
<answer><para>Unix systems normally run sulogin
if the normal bootup fsck run errors out
so that root can log in and fix it.
Because sulogin will accept any password if /etc/passwd is corrupt,
the LFS developers decided this was a security risk.
Therefore, the LFS bootscripts shut the machine down if fsck errors,
and it must be booted with the "init=/bin/bash" kernel parameter
to get a root shell.
Whether this is wise is beyond the scope of the FAQ,
but if it doesn't work for you
you'll want to change that boot script before it's too late.
</para></answer>
</qandaentry>

<!-- elist: ,lfs-dev,new -->
<qandaentry id="new-version">
<question><para>There's a new version of package Foo.</para></question>
<answer><para>Excellent. If you wish to help, please report it to lfs-book
(or blfs-book for packages in BLFS)
unless the automated freshmeat announcements have already done so.
</para>
<para>If you wish to do even better,
you can test the new version and report if it works
or what is necessary to make it work.
</para></answer>
</qandaentry>

<!-- elist: ,lfs-support,blfs-support -->
<qandaentry id="delete_key_not_work">
<question><para>The Delete key doesn't work.
</para></question>
<answer><para>See:
<ulink url="http://beyond.linuxfromscratch.org/view/cvs/chapter03/inputrc.html"/>.
</para></answer>
</qandaentry>

</qandadiv><!-- frb -->

<!-- dlist: ,lfs-dev,new -->
<qandadiv id="fre"><title>Frequently Requested Enhancements</title>

<para>LFS is a very basic system,
in massive contrast to traditional distributions. The reason is this:
LFS is not intended to create your system as you want it.
It's intended to be just enough to allow you
to build your system as you want it.
It's not an end, it's a beginning.
When you're done with LFS, you've just started building your system.
</para>
<para>This can be a problem if you're new to Unix systems
and want a typical install with X and a web browser
but have no idea what packages you need.
For this reason, there is the Beyond Linux From Scratch, or BLFS, project.
It is at <ulink url="http://beyond.linuxfromscratch.org/"/>.
</para>

<!-- elist: ,lfs-dev,new -->
<qandaentry id="why-not-faq">
<question><para>Why not include the FAQ in the book?</para></question>
<answer><para>Marc Heerdink may have said it best in a post to lfs-dev:
<blockquote><para>The problem is that the FAQ is a dynamic document.
The FAQ for a book release is released only after the book version itself,
because the FAQ is updated to reflect the Qs asked
about the current version of the book.
A link is better, since you'll always have the most up-to-date answers handy.
</para></blockquote>
</para></answer>
</qandaentry>

<!-- elist: ,lfs-dev,new -->
<qandaentry id="gcc-3_0">
<question><para>Why isn't GCC 3.x in the book?
</para></question>
<answer><para>It is in LFS
<ulink url="http://www.linuxfromscratch.org/view/cvs/">CVS</ulink>,
and you will need to use the instructions there
for all packages since some of them need patches to work with gcc 3.1.
</para>
<para>You should know that gcc 2.x and 3.x don't mix.
Among other things,
this means that you may have problems if you must use precompiled binaries
as is often the case with closed source software.
(The most recent version of Netscape 4 is reported to be fine.)
</para></answer>
</qandaentry>

<!-- elist: ,lfs-dev,new --><!-- 2002-04-20: I'm hoping everyone who cares
                                             will notice the new version.
<qandaentry id="add-gawk">
<question><para>Why not use gawk instead of mawk?</para></question>
<answer><para>As of version 3.3, the book uses gawk.
</para></answer>
</qandaentry>
-->

<!-- elist: ,lfs-dev -->
<qandaentry id="add-grub"><question><para>Why not use GRUB instead of LILO?</para></question>
<answer><para>GRUB has not yet been released as stable.
When it is, it will be considered and, if it seems better than LILO, used.
</para>
<para>If your current setup uses GRUB, there's no need to switch.
In addition to the GRUB documentation, see the LFS "GRUB-Howto" Hint at
<ulink url="http://hints.linuxfromscratch.org/hints/grub-howto.txt"/>.
</para></answer>
</qandaentry>

<!-- elist: ,lfs-dev,new -->
<qandaentry id="why-vim">
<question><para>Why is vim in the book?</para></question>
<answer><para>This is fairly well discussed in the thread starting at
<ulink url="http://archive.linuxfromscratch.org/mail-archives/lfs-dev/2002/02/0012.html"/>.
</para></answer>
</qandaentry>

<!-- elist: ,lfs-dev -->
<qandaentry id="why-ed"><question><para>Why is ed in the book?</para></question>
<answer><para>The book includes ed because patch uses it to process ed scripts.
However, these are rare today; everyone uses diff format patches.
</para><para>But ed does have other uses:
<itemizedlist>
<listitem><para>For all who've learned to use it,
ed is a very useful emergency editor.
The MS Windows standard telnet client can deal with ed
but has trouble with fullscreen editors (like vim).
And a full featured vim requires not only ncurses, but X11 as well!
Any trouble with those libraries will leave
the system without an editor if ed isn't present.
</para></listitem>
<listitem><para>Though it's not a reason to have ed in the book,
some people actually like ed.
</para></listitem>
<listitem><para>Understanding ed helps with understanding vi(m) and Unix
history in general.
</para></listitem>
</itemizedlist>
</para></answer>
</qandaentry>

<!-- elist: ,lfs-dev,new -->
<qandaentry id="why-not-package-management"><question><para>Why isn't some
package manager in the book?</para></question>
<answer><para>Package management -
beyond that profided by tarballs and makefiles -
is beyond the scope of the book.
If nothing else does,
the number of different "solutions" should hint at some of the reasons.
</para>
<para>Here are a few of the options:
<itemizedlist>

<listitem><para>No package management is really necessary.
Unless it is desirable to monitor package file placement minutely,
any package large enough to warrent removal for disk space reasons
can be installed in /opt as detailed by the FHS.
Libraries are generally best upgraded by rebuilding the system
from the bottom up.
</para></listitem>

<listitem><para>RPM, the Redhat Package Manager,
is used by a number of distributions.
It is available from
<ulink url="http://www.rpm.org/"/>,
and there is an RPM Hint to help with installation at
<ulink url="http://hints.linuxfromscratch.org/hints/rpm.txt"/>.
</para></listitem>

<listitem><para>GNU Stow is an interesting concept. See
<ulink url="http://www.gnu.org/software/stow/"/>.
</para></listitem>

<listitem><para>Originally based on a script
written by LFS' own Gerard Beekmans,
install-log records a list of files installed by a package
as the package is installed.
It is available from
<ulink url="http://install-log.sourceforge.net/"/>.
</para></listitem>

<listitem><para>Gerard has since made additions to his script.
It is available from
<ulink url="ftp://ftp.linuxfromscratch.org/misc/pkginst"/> and
<ulink url="ftp://ftp.linuxfromscratch.org/misc/pgkdel"/>.
</para></listitem>

<listitem><para>CheckInstall attempts log system calls made by
"make install". It is available from
<ulink url="http://asic-linux.com.mx/~izto/checkinstall/"/>.
</para></listitem>

</itemizedlist>
Do you know of one missing from that list?
Please email its name, URL, and other information,
to the FAQ maintainer or an apropriate LFS mailing list so it can be added here.
</para></answer>
</qandaentry>

</qandadiv><!-- fre -->

<!-- dlist: ,lfs-support,lfs-compile,blfs-support,new -->
<qandadiv id="fee"><title>Frequently Encountered Errors</title>

<!-- dlist: ,lfs-compile,blfs-support,new -->
<qandadiv id="fee-compile"><title>Compile Time Errors</title>

<!-- dlist: ,lfs-compile,blfs-support,new -->
<qandadiv id="fee-compile-any">
<title>Compile Time Errors From Any Package</title>

<!-- elist: ,lfs-compile -->
<qandaentry id="bad-interpreter-permission-denied">
<question>
<para>./configure: bad interpreter: Permission denied</para>
</question>
<answer><para>You're most likely getting this while building bash in Chapter 5
of the LFS Book.
The problem is most likely your mount options.
You probably have a line in /etc/fstab like:
<screen>/dev/hda10	/mnt/lfs	ext2	user	1  2
</screen>
'user' is the mount flag, and it's the problem. To quote from the mount man page:
<blockquote><screen> 
user  Allow  an  ordinary  user to mount the file system.
      This  option  implies  the options noexec,  nosuid,
      and nodev (unless overridden by subsequent options,
      as in the option line user,exec,dev,suid).
</screen></blockquote>
So change the line in /etc/fstab like this:
<screen>/dev/hda10	/mnt/lfs	ext2	defaults	1  2
</screen>
</para></answer>
</qandaentry>

<!-- elist: ,lfs-compile -->
<qandaentry id="env-bash-no-such-file">
<question><para>/usr/bin/env: /bin/bash: No such file or directory</para></question>
<answer><para>You're trying to follow the LFS Book
and working on entering chroot, right?
Most likely $LFS/bin/bash isn't statically linked.
Check it with:
<screen>file $LFS/bin/bash
</screen>
If that doesn't say something about "statically linked",
reinstall bash following the instructions in Chapter 5.
</para></answer>
</qandaentry>

<!-- elist: ,lfs-compile -->
<qandaentry id="config-not-gnu-c">
<question><para>checking whether we are using GNU C... no
</para></question>
<answer><para>If you're getting an error from configure like:
<screen>checking whether we are using GNU C... no
configure: error: GNU libc must be compiled using GNU CC
</screen>
It may be because egrep (from the grep package) isn't working.
</para>
<para>To test if egrep is working <emphasis>before</emphasis> reinstalling
the grep package in Chapter 6,
run the following command from <emphasis>outside</emphasis> chroot:
<screen>file $LFS/bin/egrep
</screen>
If it doesn't say "statically linked" you have a problem
and need to reinstall the grep package.
</para>
<para>To test if egrep is working <emphasis>after</emphasis> reinstalling
the grep package in Chapter 6,
run the following command from <emphasis>inside</emphasis> chroot:
<screen>egrep root /etc/passwd
</screen>
If it doesn't print root's line from /etc/passwd,
again, you have a problem.
(This test also works if you encounter the problem after rebooting
into the new LFS system.)
</para></answer>
</qandaentry>

<!-- elist: ,lfs-compile -->
<qandaentry id="config-hang-size_t">
<question><para>Why does configure hang at
"checking for signed size_t type..."?</para></question>
<answer><para>You over optimized gcc.
</para></answer>
</qandaentry>

<!-- elist: ,blfs-support,new -->
<qandaentry id="gtk-2_0">
<question><para>I'm getting errors building a package that requires GTK+,
but I've installed GTK+ 2.x.</para></question>
<answer><para>GTK+ 2.x and 1.2.x aren't compatible.
The package you're installing may need GTK+ (and GLIB) 1.2.x.
You can install GTK+ (and GLIB) 1.2.x next to 2.x.
</para></answer>
</qandaentry>

</qandadiv><!-- fee-compile-any -->

<!-- dlist: ,lfs-compile -->
<qandadiv id="fee-compile-specific">
<title>Compile Time Errors From Specific Packages</title>

<!-- elist: ,lfs-compile -->
<qandaentry id="optimized-glibc-fail">
<question><para>My optimized build of glibc is failing in spinlock.c</para></question>
<answer><para>It should be mentioned that glibc (and gcc and binutils)
are good places to not optimize.
The performance versus stability trade off is unusually poor
for these packages. But. . . .
</para></answer>
<answer><para>If you've specified a CFLAGS value like "-march=i686 -mcpu=686"
and you're getting an error like this:
<screen>spinlock.c: In function `__pthread_lock':
spinlock.c:107: inconsistent operand constraints in an `asm'
make[2]: *** [/usr/src/glibc-build/linuxthreads/spinlock.o] Error 1
make[2]: Leaving directory `/usr/src/glibc-2.2.4/linuxthreads'
make[1]: *** [linuxthreads/others] Error 2
make[1]: Leaving directory `/usr/src/glibc-2.2.4'
make: *** [all] Error 2
</screen>
It's because, unlike almost everything else,
spinlock.c requires optimization.
You could set CFLAGS to something like
"-march=i686 -mcpu=i686 -O2".
(Note the "-O2".)
</para>
<para>But it is better to set optimizations in glibc-x.x.x/Makeconfig.
This is the relevant section of Makeconfig:
<screen># Default flags to pass the C compiler.
ifndef default_cflags
ifeq ($(release),stable)
default_cflags := <emphasis role="strong">-g -O2</emphasis>
else
default_cflags := -g -O
endif
endif
</screen>
And here is an example to adapt:
<screen># Default flags to pass the C compiler.
ifndef default_cflags
ifeq ($(release),stable)
default_cflags := <emphasis role="strong">-g0 -Os -march=i386 -mcpu=i386 -pipe</emphasis>
else
default_cflags := -g -O
endif
endif
</screen>
</para></answer>
</qandaentry>

<!-- elist: ,blfs-support,new -->
<qandaentry id="missing-x-includes">
<question><para>X11/Xlib.h: No such file or directory</para></question>
<answer><para>Typical symptoms look like this:
</para>
<screen>$ echo -en 'x11:\n\tgcc x11.c\n' > Makefile
$ echo -en '#include &lt;X11/Xlib.h>\nmain() { }\n' > x11.c   
$ make
gcc x11.c
<emphasis role="strong">x11.c:1: X11/Xlib.h: No such file or directory
make: *** [x11] Error 1</emphasis>
$ rm Makefile x11.c 
$ 
</screen>
<para>Creating a couple symlinks will fix it. Here are the commands:
</para>
<screen>cd /usr
ln -s X11R6 X11
cd include
ln -s ../X11/include/X11 X11
</screen></answer>
</qandaentry>

<!-- elist: ,lfs-compile,new -->
<qandaentry id="unable-to-mount-root">
<question><para>Kernel panic: VFS: unable to mount root fs</para></question>
<answer><para>There several reasons why the kernel might be unable to
mount the root filesystem.
<itemizedlist>
<listitem><para>Did you specify the correct partition in
<filename>/etc/lilo.conf</filename>?
</para></listitem>
<listitem><para>Did you remember to rerun lilo after changing
<filename>/etc/lilo.conf</filename>?
</para></listitem>
<listitem><para>Is support for the hard drive enabled in the kernel.
For SCSI this means support for the specific SCSI adapter.
</para></listitem>
<listitem><para>Is support for the hard drive compiled into the kernel,
not just as a module.
(Modules are stored on the filesystem.
If a driver needed to access the filesystem is stored as a module on
that filesystem, well. . . you know. . . . ;)
</para></listitem>
<listitem><para>Is support for the filesystem compiled into the kernel.
Again, not a module.
Support for ext2 is enabled by default,
but others like ext3, reiser, jfs, and xfs are not.
</para></listitem>
</itemizedlist></para></answer>
</qandaentry><!-- unable-to-mount-root -->

</qandadiv><!-- fee-compile-specific -->

<!-- dlist: ,lfs-compile,blfs-support,new -->
<qandadiv id="fee-compile-notlisted"><title>Compile Time Errors Not Listed Above</title>

<!-- elist: ,lfs-compile,new -->
<qandaentry id="gnu-patches">
<question><para>I used a patch from GNU to upgrade.
Is that OK?</para></question>
<answer><para>For some reason the patches from GNU don't usually work.
Better download the full archive and try again.
</para>
<para>Ed. Note: can anyone tell <ulink url="mailto:sk@sethwklein.net">me</ulink>
why GNU patches fail?
</para></answer>
</qandaentry>

<!-- elist: ,lfs-compile,blfs-support -->
<qandaentry id="optimizations">
<question><para>I'm using optimizations.
Can that be a problem?</para></question>
<answer><para>If you're getting errors and you're using optimization settings,
that may be the problem.
If you ask on the list and they can't figure it out immediately,
they'll likely suggest trying it without optimizations,
so just retry it without before asking.
You'll be one step ahead of them :)
</para>
<para>Optimizations can cause many different
even seemingly unrelated errors.
They can cause configure scripts to fail.
Optimizations that work for someone else
may not work for you. Settings that used to work may break
if you make the smallest, most innocent hardware change.
</para>
<para>(If you don't know what optimization settings are,
don't worry, really you don't need to.)
</para></answer>
</qandaentry>

<!-- elist: ,lfs-compile,blfs-support,new -->
<qandaentry id="version-not-in-book">
<question><para>I'm using a version not in the book.
Is that a problem?</para></question>
<answer><para>If you're getting errors and you're using a version of
a package that differs from the version in the book
(either newer or older), try the version in the book.
Sometimes there are reasons why the book uses a particular version.
Search the list archives if you're curious.
</para>
<para>In particular, GCC 3.0 will cause problems.
See the entry "<link linkend="gcc-3_0">Why isn't GCC 3.0.x in the book?</link>".
</para></answer>
</qandaentry>

<!-- elist: ,lfs-compile,blfs-support,new -->
<qandaentry id="dirty-sources">
<question><para>I didn't delete the source tree after my last attempt.
Do I need to?</para></question>
<answer><para>Yes. You should always delete the source tree after installing
and delete it and start over if anything fails.
</para>
<para>The only exception is the kernel.
Most people keep their kernel source so they don't have to reconfigure
it from scratch if they need to make a small change.
If a large change is needed, like changing processor type,
it may be necessary to restart with a fresh tree even with the kernel.
</para>
<para>Here's an example when everything works:
<screen>tar xvjf foo-0.0.tar.bz2
cd foo-0.0
./configure --prefix=/usr
make
make install
<emphasis role="strong">cd ..
rm -rf foo-0.0</emphasis>
</screen>
And here's an example for if something (in this case configure) fails:
<screen>tar xvjf foo-0.0.tar.bz2
cd foo-0.0
./configure --prefix=/usr
.
.
.
*** configure: error: foo requires libess 4.2 or greater
please install libess and rerun configure.
<emphasis role="strong">cd ..
rm -rf foo-0.0</emphasis>
tar xvjf libess-4.2.tar.bz2
cd libess-4.2
./configure --prefix=/usr
make
make install
<emphasis role="strong">cd ..
rm -rf libess-4.2</emphasis>
tar xvjf foo-0.0.tar.bz2
cd foo-0.0
./configure --prefix=/usr
make
make install
<emphasis role="strong">cd ..
rm -rf foo-0.0</emphasis>
</screen></para>
<para>Ed. Note: The name of the fictional libess above follows
libiberty (from glibc, AFAIK) and libofat.
The reason comes from the gcc flag, -l, for linking a library when compiling.
For instance,
<screen>gcc -o foo foo.c -lm
</screen>
would link the "m" (math) library with the executable foo.
So, for the libraries above, the command looks like:
<screen>gcc -o foo foo.c -liberty -lowfat -less
</screen></para>
<para>Bonus points if you caught the reference to
The Hitchhiker's Guide to the Galaxy, by Douglas Adams in the example.
</para></answer>
</qandaentry>

</qandadiv><!-- fee-compile-notlisted -->

</qandadiv><!-- fee-compile -->

<!-- dlist: ,lfs-support,new -->
<qandadiv id="fee-runtime"><title>Run Time Errors</title>

<!-- dlist: ,lfs-support,new -->
<qandadiv id="fee-runtime-specific"><title>Run Time Errors From Specific Packages</title>

<!-- elist: ,lfs-support,new -->
<qandaentry id="char-major-10-135">
<question><para>modprobe: Can't locate module char-major-10-135</para></question>
<answer><para>"char-major-10-135" refers to the character device,
major 10, minor 135, which is /dev/rtc.
It provides access to the BIOS clock, or RTC, the Real Time Clock.
See /usr/src/linux/Documentation/rtc.txt for more information.
</para>
<para>The error is because something, most likely hwclock,
is trying to use /dev/rtc
but you haven't configured kernel support for it in your kernel.
Either delete /dev/rtc so hwclock won't try to use it
or enable RTC support in your kernel.
It's located in make menuconfig under
"Character devices" -&gt; "Enhanced Real Time Clock Support".
</para></answer>
</qandaentry>

</qandadiv><!-- fee-runtime-specific -->

</qandadiv><!-- fee-runtime -->

</qandadiv><!-- fee -->

<!-- dlist: ,lfs-support,blfs-support -->
	<qandadiv id="resources"><title>Resources</title>

<!-- elist: ,lfs-support,blfs-support -->
<qandaentry id="how-to-find"><question><para>How do I find package Foo?</para></question>	
<answer><para>Mostly, it's not hard, but some packages can lead quite a chase.
Here are some steps:
<orderedlist>

<listitem><para><ulink url="http://freshmeat.net/"/>:
Searching for <screen>foo</screen> will usually turn up a freshmeat page
with links to an URL
where you can check for newer releases not reported to freshmeat.
</para></listitem>

<listitem><para><ulink url="http://www.google.com/"/>:
Use a search string like
<screen>+foo +index</screen>
which tends to find "Index of /pub/foo" type pages, or even
<screen>+foo +index -RPM -debian</screen>
to eliminate links to RPM packages and Debian's archives.
</para></listitem>

<listitem><para>Google may well turn up a link to something under
<ulink url="http://www.ibiblio.org/pub/"/>.
(If you want to look specifically on ibiblio.org use
<screen>foo site:ibiblio.org</screen>)
Beware that ibiblio.org may not have the most recent version.
However, they often will have...
</para></listitem>

<listitem><para>A foo.lsm (Linux Software Map) file
which may list a primary site where more recent versions may be found.
</para></listitem>

</orderedlist>
</para></answer>
</qandaentry>

<!-- elist: ,lfs-support,blfs-support -->
<qandaentry id="bootcd">
<question><para>How do I make a bootable CD?</para></question>
<answer><para>See the Boot-CD Hint and
<ulink url="http://hints.linuxfromscratch.org/hints/bootcd.txt"/>.
</para></answer>
</qandaentry>

<!-- elist: ,blfs-support -->
<qandaentry id="portmap">
<question><para>Where's portmap?</para></question>
<answer><para>There are instructions in the NFS Hint at
<ulink url="http://hints.linuxfromscratch.org/hints/nfs.txt"/>.
</para></answer>
<answer><para>Also, Marc Heerdink writes:
<blockquote><para>I have a version of tcp_wrappers and portmap up that have both
been patched with the debian patches, adapted Makefiles for LFS plus all
compile warnings/problems were fixed. Additionally, an lfs-install.sh is
included in both tarballs that provides a really quick and dirty way to
install them. They can be found at
<ulink url="http://www.linuxfromscratch.org/~gimli/"/>.
You may want to add a note about these packages for people who want to do
it the easy way :)
</para></blockquote>
</para></answer>
</qandaentry>

<!-- elist: ,lfs-support -->
		<qandaentry id="what-dist"><question><para>What distribution should I use to start from?</para></question>
			<answer><para>Any recent distribution should be fine. If you have problems,
				try installing and/or updating the development packages.
				(Look for ones starting in "gcc" or "glibc" "libstdc++" or
				ending in "-dev".)
			</para></answer>
		</qandaentry>
<!-- elist: ,lfs-support -->
		<qandaentry id="really-small"><question><para>How do I make that really small install the book mentions?</para></question>
			<answer><para>Gerard describes the process of making a 5MB LFS install
				in an email archived at
				<ulink url="http://archive.linuxfromscratch.org/mail-archives/lfs-support/2001/10/0072.html"/>.
			</para></answer>
		</qandaentry>

<!-- elist: ,lfs-support -->
<qandaentry id="where-ncurses-mandrake">
<question><para>Where's libncurses.a in Mandrake?</para></question>
<answer><para>In Mandrake/RPMS2/libncurses5-devel-5.2-16mdk.1586.rpm on Disk 2.
Version numbers might be a little different for you.
(If you're missing libcurses.a (no "n"),
reread the book's instructions for bash more carefully.)
</para></answer>
</qandaentry>

	</qandadiv><!-- resources -->

<!-- dlist: ,lfs-support,lfs-compile,new -->
<qandadiv id="fsc"><title>Frequently Sought Cluebits</title>

<!-- elist: ,lfs-compile,new -->
<qandaentry id="should-i-keep-sources">
<question><para>Do I need to keep the source after installing?</para></question>
<answer><para>No. You should delete the source after installing.
The source is only useful for reinstalling without recompiling.
To recompile, always delete the old source and start fresh
because "make clean" and friends are not always trustworthy.
Deleting compiled source trees also frees considerable disk space.
</para>
<para>Here's an example:
<screen>tar xvjf foo-0.0.tar.bz2
cd foo-0.0
./configure --prefix=/usr
make
make install
<emphasis role="strong">cd ..
rm -rf foo-0.0</emphasis>
</screen>
</para></answer>
</qandaentry>

<!-- elist: ,lfs-support -->
<qandaentry id="dos-text">
<question><para>What's a DOS format text file?</para></question>
<answer><para>It has to do with the characters used to end lines.
</para>
<para>There are two that may be used:
<itemizedlist>
	<listitem><para>Line Feed: (LF) Octal:012 Decimal:10 Hex:0A C Style Escape:'\n'
		Moves down one line.
	</para></listitem>
	<listitem><para>Carriage Return: (CR) Octal:015 Decimal:13 Hex:0D C Style Excape:'\r'
		Move to the left margin.
	</para></listitem>
</itemizedlist>
</para>
<para>Unix, DOS, and MacOS each use a different combination to end lines in text files:
<itemizedlist>
	<listitem><para>Unix: LF only.
		This is why when a Unix format text file is sent to a printer raw,
		it prints out
		<screen>like
    stairs
          steps.
</screen>
	</para></listitem>
	<listitem><para>DOS: CRLF both.
		Which is why if you do "cat -v" on a DOS file you'll see a "^M"
		(control m is carriage return) at the end of each line. And that
		is why scripts don't work when written with Microsoft Notepad.
		The kernel looks for "/bin/sh^M" which doesn't exist. There's a
		"/bin/sh", but nothing with a "^M" appended.
	</para></listitem>
	<listitem><para>MacOs: CR only.
		Printers probably print every line atop the first, and Unix tools
		think the whole file is one line with "^M" all through it.
	</para></listitem>
</itemizedlist>
</para>
<para>To change DOS to Unix, use
<screen>cp &lt;filename> &lt;filename>.dos && cat &lt;filename>.dos | tr -d '\r' > &lt;filename>
</screen>
Other conversions will probably require sed or a different use of tr
and are left as an exercise for the reader.
</para></answer>
</qandaentry>

</qandadiv><!-- fsc -->


<!-- dlist: ,lfs-compile,blfs-support -->
	<qandadiv id="compiling"><title>Compiling</title>
<!-- elist: ,lfs-compile,blfs-support -->
		<qandaentry id="sig11"><question><para>I'm getting fatal errors about signal 11.</para></question>
			<answer><para>See <ulink url="http://www.bitwizard.nl/sig11/"/>.
			</para></answer>
		</qandaentry>
<!-- elist: ,lfs-compile,blfs-support -->
		<qandaentry id="cross-compile"><question><para>How do I cross compile LFS?</para></question>
			<answer><para>It's often useful to compile LFS for one machine
				on another machine. Say using that 1Ghz Athlon
				to build an install for an old 486.
				While this is technically not cross compiling,
				binaries compiled for the Athlon cannot be run on the 486
				because binaries compiled for the newer processor
				use features the older processor doesn't have.
				To make the newer system compile for the older,
				follow the hint at
				<ulink url="http://hints.linuxfromscratch.org/hints/crosscompiling-x86.txt"/>.
			</para></answer>
		</qandaentry>
<!-- elist: ,lfs-compile,blfs-support -->
		<qandaentry id="gcc-warnings"><question><para>Are compiler warnings from GCC bad?</para></question>
			<answer><para>Short answer: no.
			</para></answer>
			<answer><para>Long answer: probably, but only to someone
				working on the package you're trying to compile. Mostly,
				everything will be fine unless make quits with an error.
			</para>
			<para>Here's an example:
			</para>
			<screen>sk ~/tmp $ cat > Makefile
main:
	gcc main.c
sk ~/tmp $ cat > main.c
void main() { exit(0); }
sk ~/tmp $ make
gcc main.c
<emphasis role="strong">main.c: In function `main':
main.c:1: warning: return type of `main' is not `int'</emphasis>
sk ~/tmp $ ######## that worked ########
sk ~/tmp $ 
sk ~/tmp $ cat > main.c
int main() { e<emphasis role="strong">xx</emphasis>it(0) }
sk ~/tmp $ make
gcc main.c
<emphasis role="strong">main.c: In function `main':
main.c:1: parse error before `}'
make: *** [main] Error 1</emphasis>
sk ~/tmp $ ######## that failed ########
sk ~/tmp $
			</screen></answer>
		</qandaentry>

<!-- elist: ,lfs-compile -->
<qandaentry id="perm-denied">
<question><para>I'm getting `/dev/null: Permission denied'</para></question>
<answer><para>Does /dev/null look like this:
<screen>$ ls -l /dev/null
crw-rw-rw-   1 root     root       1,   3 Aug  3  2000 /dev/null
</screen>
If not, it should.
See the chmod(1), chown(1), and mknod(1) man pages
and /usr/src/linux/Documentation/devices.txt if you need help fixing it.
</para>
<para>If it does look right,
the problem is probably your mount options.
See the answer to "<link
linkend="bad-interpreter-permission-denied">./configure: bad
interpreter: Permission denied</link>", above.
</para></answer>
</qandaentry>

<!-- elist: ,lfs-compile -->
		<qandaentry id="conf-guess-fail"><question><para>configure can't guess my host type.</para></question>
			<answer><para>Typical symptoms look like this:
			</para>
			<screen>sk ~/tmp-0.0 $ ./configure 
creating cache ./config.cache
checking host system type... <emphasis role="strong">configure: error: can not guess host type; you must specify one</emphasis>
sk ~/tmp-0.0 $
			</screen>
			<para>The problem is usually that the script can't run the compiler.
				Usually it's just a missing /usr/bin/cc symlink. You can fix it like
				this:
			</para>
			<screen>cd /usr/bin
ln -s gcc cc
			</screen>
			<para>If that doesn't do it, check the file config.log created by configure.
				Errors go here and may indicate the problem.
			</para></answer>
		</qandaentry>
<!-- elist: ,lfs-compile,blfs-support -->
		<qandaentry id="stdgnu89"><question><para>I'm having trouble compiling something with GCC 3.x</para></question>
			<answer><para>You should be aware that you're on the bleeding edge.
				As of 3.0, the LFS Book recommends GCC 2.95.3.
				However, there are some things you can do:
			</para></answer>
			<answer><para>Try adding the -std=gnu89 switch to the compile options.
				(For instance, in CFLAGS or CC.
				The exact method is a bit beyond the scope of this FAQ.)
			</para></answer>
		</qandaentry>
	</qandadiv><!-- compiling -->
<!-- dlist: ,lfs-compile,blfs-support -->
	<qandadiv id="specific-packages"><title>Questions about specific packages.</title>
<!-- elist: ,lfs-support,blfs-support -->
		<qandaentry id="how-to-create-user"><question><para>How do I create a non-root user?</para></question>
			<answer><para>Use the useradd program. It was installed with the shadow package.
			</para></answer>
		</qandaentry>
<!-- elist: ,lfs-compile -->
		<qandaentry id="sh-utils-getloadavg"><question><para>My static sh-utils build is failing with "undefined reference to `getloadavg'".</para></question>
			<answer><para>If you're trying to build static sh-utils and you're getting an error like this:
				<screen>gcc  -g -O2  -static -o uptime  uptime.o ../lib/libsu.a -lutil
uptime.o: In function `print_uptime':
/lfs/tmp/sh-utils-2.0/src/uptime.c:125: undefined reference to `getloadavg'
collect2: ld returned 1 exit status
make[2]: *** [uptime] Error 1
make[2]: Leaving directory `/lfs/tmp/sh-utils-2.0/src'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/lfs/tmp/sh-utils-2.0'
make: *** [all-recursive-am] Error 2
				</screen>
				I am unable to reproduce this error and so cannot present
				a tested solution, but two solutions have been posted by others.
				I suggest trying them in the following order:
				<itemizedlist>
					<listitem><para><ulink url="http://archive.linuxfromscratch.org/mail-archives/blfs-support/2001/06/0507.html"/>:
					This attempts to correct the incorrectly generated config.h
					and should be the correct solution if you can get it to work
					by following the description given in the post.
					</para></listitem>
					<listitem><para>If that doesn't work, delete the sources,
					re-extract, and try this:
					<ulink url="http://archive.linuxfromscratch.org/mail-archives/blfs-support/2001/06/0495.html"/>.
					This attempts to avoid compiling uptime at all
					since it won't be needed in chroot
					and compiling uptime dynamically in chroot
					doesn't have this problem.
					</para></listitem>
				</itemizedlist>
			</para></answer>
		</qandaentry>

<!-- elist: ,blfs-support -->
		<qandaentry id="f-hostname"><question><para>My hostname is getting set to "-f"!</para></question>
			<answer><para>You need to install the net-tools package. (See the instructions in
				the LFS book.)
			</para>
			<para>The hostname command your system is using is from sh-utils and doesn't
				support the -f option. When it is called with the -f option it assumes
				the hostname should be set to "-f". The hostname command from net-tools
				doesn't have this problem.
			</para></answer>
		</qandaentry>
<!-- elist: ,lfs-support,blfs-support -->
		<qandaentry id="kernel-modules"><question><para>How do I setup kernel modules?</para></question>
			<answer><para>Follow the Module-HOWTO at
			<ulink url="http://www.tldp.org/HOWTO/Module-HOWTO/"/>.
			</para></answer>
		</qandaentry>
<!-- elist: ,lfs-compile --><!--
		<qandaentry id="fileutils-error"><question><para>I'm getting errors when compiling fileutils.</para></question>
			<answer><para>You may need to upgrade to the latest version or apply the fileutils patch.
				Both are available from
				<ulink url="http://download.linuxfromscratch.org/conglomeration/"/>.
			</para></answer>
		</qandaentry>
-->
<!-- elist: ,lfs-support --><!-- 2001-09-29
		<qandaentry id="glibc-crypt"><question><para>Where is glibc-crypt-2.2.x?</para></question>
			<answer><para>As of glibc-2.2, you no longer need to get glibc-crypt separately.
				It has been merged into the main package because the US
				has relaxed it's export regulations.
			</para></answer>
		</qandaentry>
-->
<!-- elist: ,lfs-support -->
		<qandaentry id="lilo-errors"><question><para>What do those LILO errors mean?</para></question>
			<answer><para>The documentation in the LILO distribution lists all errors
				(such as when it prints "LI" and stops),
				but a quick overview is available at
				<ulink url="http://sdb.suse.de/sdb/en/html/kgw_lilo_errmsg.html"/>.
			</para></answer>
		</qandaentry>
<!-- elist: ,lfs-support -->
		<qandaentry id="net-pf-x"><question><para>I'm getting errors about net-pf-?.</para></question>
			<answer><para>When you compiled net-tools you enabled support for a protocol
				family (that's where the "pf" comes from) that you didn't
				enable support for in the kernel. (You probably just accepted
				the default answers.)
 			</para>
			<para>A full list is in /usr/include/linux/socket.h but here is
				a list of the likely culprits:
				<itemizedlist>
					<listitem><para>net-pf-3: Amateur Radio AX.25 (AF_AX25)
					</para></listitem>
					<listitem><para>net-pf-4: Novell IPX (AF_IPX)
					</para></listitem>
					<listitem><para>net-pf-5: AppleTalk DDP (AF_APPLETALK)
					</para></listitem>
					<listitem><para>net-pf-6: Amateur Radio NET/ROM (AF_NETROM)
					</para></listitem>
					<listitem><para>net-pf-9: Reserved for X.25 project (AF_X25)
					</para></listitem>
				</itemizedlist>
			</para>
			<para>Naturally the fix is to recompile net-tools without support
				for the things you don't need. (Or recompile your kernel with
				support if you find you actually wanted them.) The workaround
				to put a line like the following in /etc/modules.conf
			</para>
			<screen>alias net-pf-? off
			</screen>
			<para>Replace the question mark with the correct number, of course.
				And rerun depmod.
			</para></answer>
			<answer><para>If you get an error about net-pf-7, you probably need to
				enable support for the loopback network device (not block
				device) in your kernel. Or you may need to add the following
				line to /etc/modules.conf and rerun depmod.
			</para>
			<screen>alias net-pf-7 loop
			</screen></answer>
		</qandaentry>
	</qandadiv><!-- specific-packages -->
<!-- dlist: ,lfs-dev,lfs-support,xblfs-support -->
	<qandadiv id="additions"><title>Additions / Changes to LFS.</title>

<!-- elist: ,lfs-dev -->
<qandaentry id="kernel-header-copy"><question><para>Why copy the kernel headers instead of linking them?</para></question>
<answer><para>In short, we copy the kernel headers
instead of linking them because
the kernel headers should match the currently running libc,
not the currently running kernel.
</para></answer>
<answer><para>For the long answer see these:
<itemizedlist>
<listitem><para>A post by Linus himself:
<ulink url="http://www.uwsg.iu.edu/hypermail/linux/kernel/0007.3/0587.html"/>.
</para></listitem>
<listitem><para>Kernel Traffic #80, 4. Symlinks In The Kernel;
Kernel/Library/etc Interface Dispute:
<ulink url="http://kt.zork.net/kernel-traffic/kt20000814_80.txt"/>
(This covers the thread in which the above post occurred.)
</para></listitem>
</itemizedlist>
</para></answer>
</qandaentry>

<!-- dlist: ,lfs-support,xblfs-support -->
<!--		<qandadiv id="setup-polishing"><title>Polishing your setup.</title>-->
<!--
			<para>These don't really belong in the FAQ,
				but they come up often on the lists.
			</para>
-->

<!-- elist: ,lfs-support -->
<qandaentry id="less-prints-ad">
<question><para>Why does less (and therefore man) print &lt;AD&gt; instead of
hyphens?</para></question>
<answer><para>Because the LANG and LC_ALL environment variables aren't set.
To fix that, set them in the ~/.bashrc file for each user or in /etc/profile
by adding lines like this:
<screen>export LANG=en_US
export LC_ALL=en_US
</screen>
</para>
<para>Those lines can be added to /etc/profile with the following command:
<screen>echo -e 'export LANG=en_US\nexport LC_ALL=en_US' >> /etc/profile
</screen>
</para>
<para>You'll have to change the "en_US" part if you don't use US English.
</para></answer>
</qandaentry>

<!-- elist: ,xblfs-support --><!-- 2002-03-27 now in BLFS. hoping a pointer
there isn't needed.
			<qandaentry id="which"><question><para>Where's which?</para></question>
				<answer><para>It's not in there! A proper which is available
					from the GNU Project at
					<ulink url="ftp://ftp.gnu.org/gnu/which/"/>
					or at
					<ulink url="http://www.xs4all.nl/~carlo17/which/"/>.
					Or for systems that don't require a good user environment
					the simplest thing is probably to create a shell script
					using these commands:
				</para>
				<screen>cat > /usr/bin/which << "EOF"
#!/bin/bash

type -p "$@"

EOF
chmod 755 /usr/bin/which
chown root.root /usr/bin/which
				</screen></answer>
			</qandaentry>
-->
<!--		</qandadiv>-->
	</qandadiv><!-- additions -->
</qandaset>
</article>

