<qandaentry id="glibc-awk-fail">
<question><para>Glibc fails and mentions BEGIN and END.</para></question>
<answer><para>If glibc fails to build with an error like this:
<screen>'BEGIN { subdirs = ""; inhibit = "" };                        \
^# { next };                                                \
^[^-] { subdirs = subdirs " " $0 };                        \
^- { inhibit = inhibit " " substr($0, 2) };                \
END { printf "sysdep-subdirs =%s\n", subdirs;                \
      printf "sysdep-inhibit-subdirs =%s\n", inhibit;        \
      print "sysd-dirs-done = t" }'                        \
       /dev/null linuxthreads/sysdeps/pthread/Subdirs 
sysdeps/unix/inet/Subdirs sysdeps/unix/Subdirs > 
/usr/src/glibc-build/sysd-dirs-tmp
/bin/sh: line 1: BEGIN { subdirs = ""; inhibit = "" };                         
^# { next };                                                
 ^[^-] { subdirs = subdirs " " $0 };                         ^- { inhibit = 
inhibit " " substr($0, 2) };                 END
</screen>
then gawk is failing.
The key is the BEGIN and END in the output.
The probable reason is that it's not statically linked
which you can fix by going back to Chapter 5 and recompiling it.
</para></answer>
</qandaentry>
