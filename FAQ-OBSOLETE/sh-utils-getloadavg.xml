<qandaentry id="sh-utils-getloadavg">
<question><para>My static sh-utils build is failing
with "undefined reference to `getloadavg'".</para></question>
<answer><para>If you're trying to build static sh-utils
and you're getting an error like this:
<screen>gcc  -g -O2  -static -o uptime  uptime.o ../lib/libsu.a -lutil
uptime.o: In function `print_uptime':
/lfs/tmp/sh-utils-2.0/src/uptime.c:125: undefined reference to `getloadavg'
collect2: ld returned 1 exit status
make[2]: *** [uptime] Error 1
make[2]: Leaving directory `/lfs/tmp/sh-utils-2.0/src'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/lfs/tmp/sh-utils-2.0'
make: *** [all-recursive-am] Error 2
</screen>
I am unable to reproduce this error and so cannot present a tested solution,
but two solutions have been posted by others.
I suggest trying them in the following order:
<itemizedlist>

<listitem><para><ulink url="http://archive.linuxfromscratch.org/mail-archives/blfs-support/2001/06/0507.html"/>:
This attempts to correct the incorrectly generated config.h
and should be the correct solution if you can get it to work
by following the description given in the post.
</para></listitem>

<listitem><para>If that doesn't work, delete the sources,
re-extract, and try this:
<ulink url="http://archive.linuxfromscratch.org/mail-archives/blfs-support/2001/06/0495.html"/>.
This attempts to avoid compiling uptime at all
since it won't be needed in chroot
and compiling uptime dynamically in chroot
doesn't have this problem.
</para></listitem>

</itemizedlist>
</para></answer>
</qandaentry>

