<sect2>
<title>Installation of Fileutils</title>

<para>The programs from a statically linked fileutils package may cause
segmentation faults on certain systems. These systems are often, but not 
limited to, Linux systems that run Glibc-2.2.3 with an AMD CPU (Athlons 
and Durons are the most reported used CPU's). If you are in this category, 
run the following to sed commands before you compile this package.

<para>Note that in some cases using these sed commands will result in
problems not being able to compile this at package at all. If that's the
case, start over again and don't use the sed commands.</para>

<screen><userinput>cp lib/Makefile.in lib/Makefile.in.backup &amp;&amp;</userinput>
<userinput>sed -e 's/\(.*\)\(fopen-safer\.c \)\\/\1\2atexit.c \\/' \</userinput>
<userinput>&nbsp;&nbsp;&nbsp;-e 's/\(.*\)\(idcache\$U\.\$.*\)\\/\1\2atexit$U.$(OBJEXT) \\/' \</userinput>
<userinput>&nbsp;&nbsp;&nbsp;lib/Makefile.in &gt; lib/Makefile.in~ &amp;&amp;</userinput>
<userinput>mv lib/Makefile.in~ lib/Makefile.in</userinput></screen></para>

<para>Install fileutils by running the following commands:
<screen><userinput>./configure --disable-nls \</userinput>
<userinput>&nbsp;&nbsp;&nbsp;--prefix=$LFS/usr --libexecdir=$LFS/bin --bindir=$LFS/bin &amp;&amp;</userinput>
<userinput>make LDFLAGS=-static &amp;&amp;</userinput>
<userinput>make install &amp;&amp;</userinput>
<userinput>cd $LFS/usr/bin &amp;&amp;</userinput>
<userinput>ln -sf ../../bin/install</userinput></screen></para>

<para>Once you have installed fileutils, you can test whether the
segmentation fault problem has been avoided by running
<userinput>$LFS/bin/ls</userinput>. If this works, then you are OK. If
not, then you need to re-do the installation using the sed commands if 
you didn't use them, or without the sed commands if you did use 
them.</para>

</sect2>

