<sect2>
<title>Installation of Fileutils</title>

<para>Before we install fileutils statically, if you are using
glibc-2.2.3 you need to apply two seds in order to prevent them giving 
segmentation faults once we enter chroot in Chapter 6.  The sed commands for 
those using glibc-2.2.3 are:

<screen><userinput>sed 's/\(.*\)\(fopen-safer\.c \)\\/\1\2atexit.c \\/' \</userinput>
<userinput>&nbsp;&nbsp;&nbsp;lib/Makefile.in &gt; tmp &amp;&amp;</userinput>
<userinput>sed 's/\(.*\)\(idcache\$U\.\$.*\)\\/\1\2atexit$U.$(OBJEXT) \\/' \</userinput>
<userinput>&nbsp;&nbsp;&nbsp;tmp &gt; lib/Makefile.in</userinput></screen></para>

<para>Install fileutils by running the following commands:
<screen><userinput>./configure --disable-nls \</userinput>
<userinput>&nbsp;&nbsp;&nbsp;--prefix=$LFS/usr --libexecdir=$LFS/bin --bindir=$LFS/bin &amp;&amp;</userinput>
<userinput>make LDFLAGS=-static &amp;&amp;</userinput>
<userinput>make install &amp;&amp;</userinput>
<userinput>cd $LFS/usr/bin &amp;&amp;</userinput>
<userinput>ln -sf ../../bin/install</userinput></screen></para>

<para>Once you have installed fileutils, you can test whether the
segmentation fault problem has been avoided by running
<userinput>$LFS/bin/ls</userinput>.  If this works then you are OK, if
not, then you need to re-do the installation using the seds if you
didn't the first time or vice-versa.</para>

</sect2>

