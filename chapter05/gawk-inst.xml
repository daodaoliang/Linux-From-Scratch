<sect2>
<title>Installation of Gawk</title>

<para>Warning: do NOT run <userinput>make uninstall</userinput> on this
package if you apply the <emphasis>sed</emphasis> fix to change the
<filename class="directory">libexec</filename> directory definition. The
<emphasis>uninstall</emphasis> rule in the <filename>Makefile</filename>
file runs a command like <userinput>rm -rf
&lt;libexecdir&gt;/*</userinput> Since we change the <filename
class="directory">libexec</filename> directory to <filename
class="directory">/usr/bin</filename> it'll run <userinput>rm -rf
/usr/bin/*</userinput></para>

<para>When installing Gawk using glibc-2.1.x on your base system,
it may be necessary to use a fix to prevent a variable name conflict. The
following commands can be used in this case.  Note that these commands
can also be used for other glibc versions so if you aren't sure, then
use the first version.</para>

<para><screen><userinput>cp awklib/Makefile.in awklib/Makefile.in.backup &amp;&amp;
sed -e '/^datadir/s/awk/gawk/' \
-e '/^libexecdir/s%/awk%%' awklib/Makefile.in.backup \
&nbsp;&nbsp;&nbsp;&gt; awklib/Makefile.in &amp;&amp;
export CPPFLAGS=-Dre_max_failures=re_max_failures2 &amp;&amp;
./configure --prefix=$LFS/usr --disable-nls \
&nbsp;&nbsp;&nbsp;--libexecdir=$LFS/usr/bin &amp;&amp;
unset CPPFLAGS &amp;&amp;
make LDFLAGS=-static &amp;&amp;
make install</userinput></screen></para>

<para>If you are using a newer glibc version (2.2.x), you can use the
following commands to install Gawk:</para>

<para><screen><userinput>cp awklib/Makefile.in awklib/Makefile.in.backup &amp;&amp;
sed -e '/^datadir/s/awk/gawk/' \
-e '/^libexecdir/s%/awk%%' awklib/Makefile.in.backup \
&nbsp;&nbsp;&nbsp;&gt; awklib/Makefile.in &amp;&amp;
./configure --prefix=$LFS/usr --disable-nls \
&nbsp;&nbsp;&nbsp;--libexecdir=$LFS/usr/bin &amp;&amp;
make LDFLAGS=-static &amp;&amp;
make install</userinput></screen></para>

</sect2>

