<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.3CR3//EN" "http://www.docbook.org/xml/4.3CR3/docbookx.dtd" [
  <!ENTITY % expect-entities SYSTEM "../ent/expect.ent">
  %expect-entities;
]>
<sect1 xmlns:xi="http://www.w3.org/2003/XInclude" id="ch-tools-expect" xreflabel="Expect">
<title>Installing Expect-&expect-version;</title>
<?dbhtml filename="expect.html"?>

<para>The Expect package contains a program for doing scripted dialogues with
other interactive programs.</para>

<screen>Approximate build time:  0.1 SBU 
Required disk space:     3.9 MB</screen>

<literallayout>Official download location for Expect (&expect-version;):
<ulink url="http://expect.nist.gov/src/"/>
And for the patch:
<ulink url="http://www.linuxfromscratch.org/patches/lfs/cvs/expect-&expect-version;-spawn.patch"/></literallayout>

<para>For its installation Expect depends on: Bash, Binutils, Coreutils, Diffutils,
GCC, Glibc, Grep, Make, Sed, Tcl.</para>



<sect2>
<title>Installation of Expect</title>

<para>First fix a bug that can result in bogus failures during the GCC test
suite run:</para>

<screen><userinput>patch -Np1 -i ../expect-&expect-version;-spawn.patch</userinput></screen>

<para>Now prepare Expect for compilation:</para>

<screen><userinput>./configure --prefix=/tools --with-tcl=/tools/lib --with-x=no</userinput></screen>

<para>The meaning of the configure options:</para>

<itemizedlist>
<listitem><para><userinput>--with-tcl=/tools/lib</userinput>: This ensures that
the configure script finds the Tcl installation in our temporary tools location.
We don't want it to find an existing one that may possibly reside on the host
system.</para></listitem>

<listitem><para><userinput>--with-x=no</userinput>: This tells the configure
script not to search for Tk (the Tcl GUI component) or the X Window System
libraries, both of which may possibly reside on the host system.</para></listitem>
</itemizedlist>

<para>Build the package:</para>

<screen><userinput>make</userinput></screen>

<para>(If you insist on testing the results, then issue:
<userinput>make test</userinput>. However, the Expect test suite is known to
experience failures under certain host conditions that are not fully
understood. Therefore, test suite failures here are not surprising, and are not
considered critical.)</para>

<para>And install it:</para>

<screen><userinput>make SCRIPTS="" install</userinput></screen>

<para>The meaning of the make parameter:</para>

<itemizedlist>
<listitem><para><userinput>SCRIPTS=""</userinput>: This prevents installation
of the supplementary expect scripts which are not needed.</para></listitem>
</itemizedlist>

<para>You can now remove the source directories of both Tcl and Expect.</para>

</sect2>


<sect2 id="contents-expect"><title>Contents of Expect</title>

<para><emphasis>Installed program</emphasis>: expect</para>

<para><emphasis>Installed library</emphasis>: libexpect&expect-version;.a</para>

</sect2>


<sect2><title>Short description</title>

<para><command>expect</command> "talks" to other interactive programs according
to a script.</para>

</sect2>


</sect1>
