<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.3CR2//EN" "http://www.docbook.org/xml/4.3CR2/docbookx.dtd" [
  <!ENTITY % kbd-entities SYSTEM "../ent/kbd.ent">
  %kbd-entities;
]>
<sect1 id="ch06-kbd">
<title>Installing Kbd-&kbd-version;</title>
<?dbhtml filename="kbd.html"?>

<screen>Estimated build time:           0.1 SBU
Estimated required disk space:  12 MB</screen>

<xi:include xmlns:xi="http://www.w3.org/2003/XInclude" href="../appendixa/kbd-contents.xml"/>



<xi:include xmlns:xi="http://www.w3.org/2003/XInclude" href="../appendixa/kbd-deps.xml"/>



<sect2>
<title>Installation of Kbd</title>

<para>By default some of Kbd's utilities (<userinput>setlogcons</userinput>,
<userinput>setvesablank</userinput> and <userinput>getunimap</userinput>) are
not installed. First enable the compilation of these utilities:</para>

<screen><userinput>patch -Np1 -i ../kbd-&kbd-version;-more-programs-2.patch</userinput></screen>

<para>Now prepare Kbd for compilation:</para>

<screen><userinput>./configure</userinput></screen>

<para>Compile the package:</para>

<screen><userinput>make</userinput></screen>

<para>And install it:</para>

<screen><userinput>make install</userinput></screen>

</sect2>

<sect2><title>Configuring your keyboard</title>

<para>Few things are more annoying than using Linux while a wrong keymap
for your keyboard is loaded. If you have a standard US keyboard, however, you
can skip this section, as the US keymap is the default as long as you don't
change it.</para>

<para>To change the default keymap, create the
<filename class="symlink">/usr/share/kbd/keymaps/defkeymap.map.gz</filename>
symlink by running the following command:</para>

<screen><userinput>ln -s path/to/keymap /usr/share/kbd/keymaps/defkeymap.map.gz</userinput></screen>

<para>Of course, replace <filename>path/to/keymap</filename> with the path and
name of your keyboard's map file. For example, if you have a Dutch keyboard,
you would use <filename>i386/qwerty/nl.map.gz</filename>.</para>

<para>Another way to set your keyboard's layout is to compile the keymap
into the kernel. This ensures that your keyboard will always work as expected,
even when you boot into maintenance mode (by passing `init=/bin/sh' to the
kernel), as then the bootscript that normally sets up your keymap isn't run.</para>

<para>Run the following command to patch the current default keymap into the
kernel source. You will have to repeat this command whenever you unpack a
new kernel:</para>

<screen><userinput>loadkeys -m /usr/share/kbd/keymaps/defkeymap.map.gz &gt; \
    /usr/src/linux-2.4.24/drivers/char/defkeymap.c</userinput></screen>

</sect2>



</sect1>
