<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.3CR2//EN" "http://www.docbook.org/xml/4.3CR2/docbookx.dtd" [
  <!ENTITY % sysvinit-entities SYSTEM "../ent/sysvinit.ent">
  %sysvinit-entities;
]>
<sect1 id="ch06-sysvinit">
<title>Installing Sysvinit-&sysvinit-version;</title>
<?dbhtml filename="sysvinit.html"?>

<screen>Estimated build time:           0.1 SBU
Estimated required disk space:  0.9 MB</screen>

<xi:include xmlns:xi="http://www.w3.org/2003/XInclude" href="../appendixa/sysvinit-contents.xml"/>



<xi:include xmlns:xi="http://www.w3.org/2003/XInclude" href="../appendixa/sysvinit-deps.xml"/>




<sect2>
<title>Installation of Sysvinit</title>

<para>When run levels are changed (for example, when halting the system),
init sends the TERM and KILL signals to the processes which it started.
Init prints "Sending processes the TERM signal" to the screen. This seems
to imply that init is sending these signals to all the currently running
processes. To avoid this confusion, the init.c file can be modified, so
that the sentence reads "Sending processes started by init the TERM
signal".</para>

<para>Edit the halt message:</para>

<screen><userinput>cp src/init.c{,.backup}
sed 's/Sending processes/&amp; started by init/g' \
    src/init.c.backup &gt; src/init.c</userinput></screen>

<para>Compile Sysvinit:</para>

<screen><userinput>make -C src</userinput></screen>

<para>And install it:</para>

<screen><userinput>make -C src install</userinput></screen>

</sect2>

<sect2><title>Configuring Sysvinit</title>

<para>Create a new file <filename>/etc/inittab</filename> by running the
following:</para>

<screen><userinput>cat &gt; /etc/inittab &lt;&lt; "EOF"</userinput>
# Begin /etc/inittab

id:3:initdefault:

si::sysinit:/etc/rc.d/init.d/rc sysinit

l0:0:wait:/etc/rc.d/init.d/rc 0
l1:S1:wait:/etc/rc.d/init.d/rc 1
l2:2:wait:/etc/rc.d/init.d/rc 2
l3:3:wait:/etc/rc.d/init.d/rc 3
l4:4:wait:/etc/rc.d/init.d/rc 4
l5:5:wait:/etc/rc.d/init.d/rc 5
l6:6:wait:/etc/rc.d/init.d/rc 6

ca:12345:ctrlaltdel:/sbin/shutdown -t1 -a -r now

su:S016:once:/sbin/sulogin

1:2345:respawn:/sbin/agetty tty1 9600
2:2345:respawn:/sbin/agetty tty2 9600
3:2345:respawn:/sbin/agetty tty3 9600
4:2345:respawn:/sbin/agetty tty4 9600
5:2345:respawn:/sbin/agetty tty5 9600
6:2345:respawn:/sbin/agetty tty6 9600

# End /etc/inittab
<userinput>EOF</userinput></screen>

</sect2>


</sect1>
