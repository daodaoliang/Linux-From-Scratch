<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN" "http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>
<sect1 xmlns:xi="http://www.w3.org/2003/XInclude" id="ch-system-util-linux" xreflabel="Util-linux">
<title>Installing Util-linux-&util-linux-version;</title>
<?dbhtml filename="util-linux.html"?>

<para>The Util-linux package contains miscellaneous utility programs. Among
them are utilities for handling file systems, consoles, partitions, and
messages.</para>

<screen>&buildtime; 0.2 SBU
&diskspace; 16 MB</screen>

<para>Util-linux installation depends on: Bash, Binutils, Coreutils,
Diffutils, GCC, Gettext, Glibc, Grep, Make, Ncurses, Sed, Zlib.</para>



<sect2>
<title>FHS compliance notes</title>

<para>The FHS recommends that we use <filename>/var/lib/hwclock</filename>,
instead of the usual <filename>/etc</filename>, as the location for the
<filename>adjtime</filename> file. To make the <command>hwclock</command>
program FHS-compliant, run the following:</para>

<screen><userinput>cp hwclock/hwclock.c{,.backup}
sed 's%etc/adjtime%var/lib/hwclock/adjtime%' \
    hwclock/hwclock.c.backup &gt; hwclock/hwclock.c
mkdir -p /var/lib/hwclock</userinput></screen>

</sect2>

<sect2>
<title>Installation of Util-linux</title>

<para>Prepare Util-linux for compilation:</para>

<screen><userinput>./configure</userinput></screen>

<para>Compile the package:</para>

<screen><userinput>make HAVE_KILL=yes HAVE_SLN=yes</userinput></screen>

<para>The meaning of the make parameters:</para>

<itemizedlist>
<listitem><para><userinput>HAVE_KILL=yes</userinput>: This prevents the
<command>kill</command> program (already installed by Procps) from being
built and installed again.</para></listitem>

<listitem><para><userinput>HAVE_SLN=yes</userinput>: This prevents the
<command>sln</command> program (a statically linked
<command>ln</command> already installed by Glibc) from being built and
installed again.</para></listitem>
</itemizedlist>

<para>Now install the package:</para>

<screen><userinput>make HAVE_KILL=yes HAVE_SLN=yes install</userinput></screen>

</sect2>


<sect2 id="contents-utillinux"><title>Contents of Util-linux</title>

<para><emphasis>Installed programs</emphasis>: agetty, arch, blockdev, cal,
cfdisk, chkdupexe, col, colcrt, colrm, column, ctrlaltdel, cytune, ddate,
dmesg, elvtune, fdformat, fdisk, fsck.cramfs, fsck.minix, getopt, hexdump,
hwclock, ipcrm, ipcs, isosize, line, logger, look, losetup, mcookie, mkfs,
mkfs.bfs, mkfs.cramfs, mkfs.minix, mkswap, more, mount, namei, pg, pivot_root,
ramsize (link to rdev), raw, rdev, readprofile, rename, renice, rev, rootflags
(link to rdev), script, setfdprm, setsid, setterm, sfdisk, swapoff (link to
swapon), swapon, tunelp, ul, umount, vidmode (link to rdev), whereis and
write</para>

</sect2>

<sect2><title>Short descriptions</title>

<para><command>agetty</command> opens a tty port, prompts for a login name,
and then invokes the login program.</para>

<para><command>arch</command> reports the machine's architecture.</para>

<para><command>blockdev</command> allows you to call block device ioctls
from the command line.</para>

<para><command>cal</command> displays a simple calendar.</para>

<para><command>cfdisk</command> is used to manipulate the partition table
of the given device.</para>

<para><command>chkdupexe</command> finds duplicate executables.</para>

<para><command>col</command> filters out reverse line feeds.</para>

<para><command>colcrt</command> is used to filter nroff output for terminals
that lack some capabilities such as overstriking and half-lines.</para>

<para><command>colrm</command> filters out the given columns.</para>

<para><command>column</command> formats a given file into multiple
columns.</para>

<para><command>ctrlaltdel</command> sets the function of the Ctrl+Alt+Del
 key combination to a hard or a soft reset.</para>

<para><command>cytune</command> was used to tune the parameters of the
serial line drivers for Cyclades cards.</para>

<para><command>ddate</command> gives the Discordian date, or converts the
given Gregorian date to a Discordian one.</para>

<para><command>dmesg</command> dumps the kernel boot messages.</para>

<para><command>elvtune</command> can be used to tune the performance
and interactivity of a block device.</para>

<para><command>fdformat</command> low-level formats a floppy disk.</para>

<para><command>fdisk</command> could be used to manipulate the partition
table of the given device.</para>

<para><command>fsck.cramfs</command> performs a consistency check on the
Cramfs file system on the given device.</para>

<para><command>fsck.minix</command> performs a consistency check on the
Minix file system on the given device.</para>

<para><command>getopt</command> parses options in the given command line.</para>

<para><command>hexdump</command> dumps the given file in hexadecimal, or
in another given format.</para>

<para><command>hwclock</command> is used to read or set the system's
hardware clock, also called the RTC (Real-Time Clock) or BIOS (Basic Input-Output System) clock.</para>

<para><command>ipcrm</command> removes the given IPC resource.</para>

<para><command>ipcs</command> provides IPC status information.</para>

<para><command>isosize</command> reports the size of an iso9660
file system.</para>

<para><command>line</command> copies a single line.</para>

<para><command>logger</command> enters the given message into the system
log.</para>

<para><command>look</command> displays lines that begin with the given
string.</para>

<para><command>losetup</command> is used to set up and control loop devices.</para>

<para><command>mcookie</command> generates magic cookies, 128-bit random
hexadecimal numbers, for xauth.</para>

<para><command>mkfs</command> is used to build a file system on a device
(usually a hard disk partition).</para>

<para><command>mkfs.bfs</command> creates an SCO (Santa Cruz Operations) bfs file system.</para>

<para><command>mkfs.cramfs</command> creates a cramfs file system.</para>

<para><command>mkfs.minix</command> creates a Minix file system.</para>

<para><command>mkswap</command> initializes the given device or file to be
used as a swap area.</para>

<para><command>more</command> is a filter for paging through text one
screen full at a time. But less is much better.</para>

<para><command>mount</command> attaches the file system on the given device
to a specified directory (thus hiding the contents of that directory) in the file-system tree.</para>

<para><command>namei</command> shows the symbolic links in the given
pathnames.</para>

<para><command>pg</command> displays a text file one screen full at a
time.</para>

<para><command>pivot_root</command> makes the given file system the new
root file system of the current process.</para>

<para><command>ramsize</command> is used to set the size of the
RAM disk in a bootable image.</para>

<para><command>rdev</command> is used to query and set the root
device and other things in a bootable image.</para>

<para><command>readprofile</command> reads kernel profiling information.</para>

<para><command>rename</command> renames the given files, replacing a given
string with another.</para>

<para><command>renice</command> is used to alter the priority of running
processes.</para>

<para><command>rev</command> reverses the lines of a given file.</para>

<para><command>rootflags</command> is used to set the rootflags
in a bootable image.</para>

<para><command>script</command> makes a typescript of a terminal
session, of everything printed to the terminal.</para>

<para><command>setfdprm</command> sets user-provided floppy disk
parameters.</para>

<para><command>setsid</command> runs the given program in a new session.</para>

<para><command>setterm</command> is used to set terminal attributes.</para>

<para><command>sfdisk</command> is a disk partition table manipulator.</para>

<para><command>swapdev</command> is used to set the swap device
in a bootable image.</para>

<para><command>swapoff</command> disables devices and files for paging
and swapping.</para>

<para><command>swapon</command> enables devices and files for paging
and swapping.</para>

<para><command>tunelp</command> is used to tune the parameters of the
line printer.</para>

<para><command>ul</command> is a filter for translating underscores into
escape sequences indicating underlining for the terminal in use.</para>

<para><command>umount</command> disconnects a file system from the
system's file tree.</para>

<para><command>vidmode</command> could be used to set the video mode
in a bootable image.</para>

<para><command>whereis</command> reports the location of binary, the
source, and the manual page for the given command.</para>

<para><command>write</command> sends a message to the given user,
<emphasis>if</emphasis> that user has not disabled such messages.</para>

</sect2>



</sect1>
