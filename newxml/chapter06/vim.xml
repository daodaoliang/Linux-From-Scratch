<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.3CR2//EN" "http://www.docbook.org/xml/4.3CR2/docbookx.dtd" [
  <!ENTITY % vim-entities SYSTEM "../ent/vim.ent">
  %vim-entities;
]>
<sect1 id="ch06-vim">
<title>Installing Vim-&vim-version;</title>
<?dbhtml filename="vim.html"?>

<screen>Estimated build time:           0.4 SBU
Estimated required disk space:  34 MB</screen>

<sect2>
<title>Alternatives to Vim</title>

<para>If you prefer another editor -- like Emacs, Joe, or Nano -- to Vim,
have a look at <ulink url="http://www.linuxfromscratch.org/blfs/view/stable/postlfs/editors.html"/> for
suggested installation instructions.</para>

</sect2>

<xi:include xmlns:xi="http://www.w3.org/2003/XInclude" href="../appendixa/vim-contents.xml"/>


<xi:include xmlns:xi="http://www.w3.org/2003/XInclude" href="../appendixa/vim-deps.xml"/>



<sect2>
<title>Installation of Vim</title>

<para>First change the default locations of the <filename>vimrc</filename> and
<filename>gvimrc</filename> files to <filename class="directory">/etc</filename>.</para>

<screen><userinput>echo '#define SYS_VIMRC_FILE "/etc/vimrc"' &gt;&gt; src/feature.h
echo '#define SYS_GVIMRC_FILE "/etc/gvimrc"' &gt;&gt; src/feature.h</userinput></screen>

<para>Now prepare Vim for compilation:</para>

<screen><userinput>./configure --prefix=/usr</userinput></screen>

<para>Compile the package:</para>

<screen><userinput>make</userinput></screen>

<para>This package has a test suite available which performs a number of
checks to ensure it will function correctly. However, the Vim test suite will
output a whole lot of seemingly garbage characters to screen which can
sometimes wreak havoc with the running terminal. Accordingly, the running of
the test suite here is optional. Should you choose to run the Vim test suite,
the following command will do so:</para>

<screen><userinput>make test</userinput></screen>

<para>And install the package:</para>

<screen><userinput>make install</userinput></screen>

<para>When called as <userinput>vi</userinput>, <userinput>vim</userinput>
will run in old-fashioned vi-mode. To allow this, create a symlink:</para>

<screen><userinput>ln -s vim /usr/bin/vi</userinput></screen>

<para>If you are going to install the X Window system on your LFS system, you
may want to re-compile Vim after having installed X. Vim comes with a nice GUI
version of the editor that requires X and a few other libraries to be
installed. For more information read the Vim documentation.</para>

</sect2>


<sect2><title>Configuring Vim</title>

<para>By default, <userinput>vim</userinput> runs in vi-compatible mode. Some
people might like this, but we prefer to run <userinput>vim</userinput> in its
own mode (else we wouldn't have included it in this book, but the original
<userinput>vi</userinput>). Create a default vim configuration file by running
the following:</para>

<screen><userinput>cat &gt; /etc/vimrc &lt;&lt; "EOF"</userinput>
" Begin /etc/vimrc

set nocompatible
set backspace=2
syntax on

" End /etc/vimrc
<userinput>EOF</userinput></screen>

<para>The <userinput>set nocompatible</userinput> will make
<userinput>vim</userinput> behave in a more useful way than the default
vi-compatible manner. The <userinput>set backspace=2</userinput> allows
backspacing over line breaks, autoindent and the start of insert. And the
<userinput>syntax on</userinput> switches on <userinput>vim</userinput>'s
semantic colouring.</para>

</sect2>



</sect1>
