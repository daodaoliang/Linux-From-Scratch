Purpose of rules file:

The kernel does not always fully populate a given kobject's attributes before
sending the uevent for that kobject.  This means that a given sysfs directory
may not have all the required files in it (each directory corresponds to a
kobject, and each file corresponds to an attribute).

Therefore, we must sometimes wait for attributes to show up when devices are
discovered.  This is accomplished by udev's WAIT_FOR_SYSFS rule types.


Description of rules:

All rules in this file match ACTION="add", because none of them apply when
devices are being removed.

DEVPATH is the sysfs path to the kobject that this uevent is for.  /devices/*
corresponds to /sys/devices/* in the filesystem, because udev uses /sys as
its root directory.

SUBSYSTEMS searches up the device tree for a SUBSYSTEM value that matches the
string given.  SUBSYSTEM is the kernel subsystem that the device uses, see
below.  In this rule, we use ?*, which matches any non-empty value.  (Note: the
device tree is not necessarily the same as the DEVPATH.  "Up the device tree"
is the same path followed by udevinfo when it is given the argument "-a".)

When the SUBSYSTEMS value is non-empty, we know that a "bus" attribute will be
created eventually, so we wait for it here.  This attribute is required for
some rules and programs.

Also, current kernels have some issues with SCSI device attributes being
created too late.  For any device with a SUBSYSTEM of scsi, we wait for the
ioerr_cnt attribute.  (This is the last attribute created on SCSI devices.)

